"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{57654:function(t,e,r){r.d(e,{isConfidentialOutput:function(){return N},isUnblindedOutput:function(){return C}});var n,i,o,a,s,u,c,h=r(75578),f=r(89349),l=r(2153),p=r(58334),d=r.n(p),y=r(37786),P=r(432);r(45217),r(9669);var v=r(21876).Buffer;function g(t){this.wrapped=t}function E(t){var e,r;function n(e,r){try{var o=t[e](r),a=o.value,s=a instanceof g;Promise.resolve(s?a.wrapped:a).then(function(t){if(s){n("return"===e?"return":"next",t);return}i(o.done?"return":"normal",t)},function(t){n("throw",t)})}catch(u){i("throw",u)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,i){return new Promise(function(o,a){var s={key:t,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,i))})},"function"!=typeof t.return&&(this.return=void 0)}function O(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){r(c);return}s.done?e(u):Promise.resolve(u).then(n,i)}function b(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){O(o,n,i,a,s,"next",t)}function s(t){O(o,n,i,a,s,"throw",t)}a(void 0)})}}function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function _(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,I(t,e)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function T(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(t,e)}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}E.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},E.prototype.next=function(t){return this._invoke("next",t)},E.prototype.throw=function(t){return this._invoke("throw",t)},E.prototype.return=function(t){return this._invoke("return",t)};var S=(function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(c){u=function(t,e,r){return t[e]=r}}function h(t,r,n,i){var o,a,s=Object.create((r&&r.prototype instanceof P?r:P).prototype),u=new S(i||[]);return s._invoke=(o=u,a=l,function(r,i){if(a===p)throw Error("Generator is already running");if(a===d){if("throw"===r)throw i;return x()}for(o.method=r,o.arg=i;;){var s=o.delegate;if(s){var u=function t(r,n){var i=r.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method))return y;n.method="throw",n.arg=TypeError("The iterator does not provide a 'throw' method")}return y}var o=f(i,r.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[r.resultName]=a.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(s,o);if(u){if(u===y)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===l)throw a=d,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=p;var c=f(t,n,o);if("normal"===c.type){if(a=o.done?d:"suspendedYield",c.arg===y)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(a=d,o.method="throw",o.arg=c.arg)}}),s}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=h;var l="suspendedStart",p="executing",d="completed",y={};function P(){}function v(){}function g(){}var E={};u(E,o,function(){return this});var O=Object.getPrototypeOf,b=O&&O(O(w([])));b&&b!==r&&n.call(b,o)&&(E=b);var m=g.prototype=P.prototype=Object.create(E);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function I(t,e){var r;this._invoke=function(i,o){function a(){return new e(function(r,a){!function r(i,o,a,s){var u=f(t[i],t,o);if("throw"===u.type)s(u.arg);else{var c=u.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(h).then(function(t){c.value=t,a(c)},function(t){return r("throw",t,a,s)})}}(i,o,r,a)})}return r=r?r.then(a,a):a()}}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function w(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:x}}function x(){return{value:e,done:!0}}return v.prototype=g,u(m,"constructor",g),u(g,"constructor",v),v.displayName=u(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(I.prototype),u(I.prototype,a,function(){return this}),t.AsyncIterator=I,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new I(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),u(m,s,"Generator"),u(m,o,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=w,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else if(c){if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return(a.type=t,a.arg=e,o)?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:w(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(n={exports:{}},n.exports),n.exports),w=v.from("0x00","hex");function x(t){return null!=t&&t.length>0}function N(t){var e=t.rangeProof,r=t.surjectionProof,n=t.nonce;return x(e)&&x(r)&&n!==w}var L=new Map([["xpub","0488b21e"],["ypub","049d7cb2"],["Ypub","0295b43f"],["zpub","04b24746"],["Zpub","02aa7ed3"],["tpub","043587cf"],["upub","044a5262"],["Upub","024289ef"],["vpub","045f1cf6"],["Vpub","02575483"]]),K=/[a-z]pub[a-km-zA-HJ-NP-Z1-9]{100,108}$/,R=/[0-9a-fA-F]{64}$/;function U(t){return K.test(t)}function k(t,e){if(t!==e)throw Error("Incorrect Identity type: need "+e+" and get "+t+".")}function C(t){return void 0!==t.unblindData}(i=s||(s={}))[i.PrivateKey=1]="PrivateKey",i[i.Mnemonic=2]="Mnemonic",i[i.MasterPublicKey=3]="MasterPublicKey",i[i.Inject=4]="Inject",i[i.Ledger=5]="Ledger",i[i.Trezor=6]="Trezor",i[i.MultisigWatchOnly=7]="MultisigWatchOnly",i[i.Multisig=8]="Multisig";var M=function(){var t;function e(t){if(!t.chain||!h.networks.hasOwnProperty(t.chain))throw Error("Network is missing or not valid");if(!t.type||!(t.type in s))throw Error("Type is missing or not valid");this.network=h.networks[t.chain],this.type=t.type,this.ecclib=t.ecclib}return e.prototype.blindPsetWithBlindKeysGetter=(t=b(S.mark(function t(e,r,n,i,o){var a,s,u,c,l,p,d,y,P,g,E,O,b,m,_,I,A;return S.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=new Map,s=new Map,u=function(t){var e;try{e=h.Psbt.fromBase64(t)}catch(r){throw Error("Invalid pset")}return e}(r),c=h.Transaction.fromHex(function(t){var e;try{e=h.Psbt.fromBase64(t)}catch(r){throw Error("Invalid pset")}return e.data.globalMap.unsignedTx.toBuffer().toString("hex")}(r)),l=T(n);case 5:if((p=l()).done){t.next=16;break}if(d=p.value,!(null!=i&&i.has(d))){t.next=11;break}return y=v.from(i.get(d),"hex"),s.set(d,y),t.abrupt("continue",14);case 11:P=e(c.outs[d].script).publicKey,s.set(d,P);case 14:t.next=5;break;case 16:g=0;case 17:if(!(g<u.data.inputs.length)){t.next=43;break}if(E=u.data.inputs[g],O=void 0,!E.witnessUtxo){t.next=24;break}if(N(E.witnessUtxo)){t.next=23;break}return t.abrupt("continue",40);case 23:O=E.witnessUtxo.script;case 24:if(!E.nonWitnessUtxo){t.next=30;break}if(b=c.ins[g].index,N(m=h.Transaction.fromBuffer(E.nonWitnessUtxo).outs[b])){t.next=29;break}return t.abrupt("continue",40);case 29:O=m.script;case 30:if(!(null!=o&&o.has(g))){t.next=33;break}return a.set(g,o.get(g)),t.abrupt("continue",40);case 33:if(O){t.next=35;break}throw Error("no witness script for input #"+g);case 35:return _=e(O).privateKey,t.next=38,h.confidential.unblindOutputWithKey(E.witnessUtxo,_);case 38:I=t.sent,a.set(g,I);case 40:g++,t.next=17;break;case 43:return t.next=45,u.blindOutputsByIndex(f.Psbt.ECCKeysGenerator(this.ecclib),a,s);case 45:return A=t.sent,t.abrupt("return",A.toBase64());case 47:case"end":return t.stop()}},t,this)})),function(e,r,n,i,o){return t.apply(this,arguments)}),e}(),D=function(t){function e(r){var n,i;if((n=t.call(this,r)||this).index=e.INITIAL_INDEX,n.changeIndex=e.INITIAL_INDEX,n.scriptToAddressCache={},k(r.type,s.MasterPublicKey),!U(r.opts.masterPublicKey))throw Error("Master public key is not valid");if(i=r.opts.masterBlindingKey,!R.test(i))throw Error("Master blinding key is not valid");return n.masterPublicKeyNode=(0,y.ZP)(r.ecclib).fromBase58(r.opts.masterPublicKey),n.masterBlindingKeyNode=(0,P.e)(r.ecclib).fromMasterBlindingKey(r.opts.masterBlindingKey),n.baseDerivationPath=r.opts.baseDerivationPath||e.INITIAL_BASE_PATH,n}_(e,t);var r,n,i,o,a,u=e.prototype;return u.blindPset=(r=b(S.mark(function e(r,n,i,o){var a=this;return S.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.prototype.blindPsetWithBlindKeysGetter.call(this,function(t){return a.getBlindingKeyPair(t.toString("hex"),!0)},r,n,i,o));case 1:case"end":return e.stop()}},e,this)})),function(t,e,n,i){return r.apply(this,arguments)}),u.isAbleToSign=function(){return!1},u.derivePublicKeyWithIndex=function(t,e){return this.masterPublicKeyNode.derive(t?1:0).derive(e).publicKey},u.getBlindingKeyPair=function(t,e){if(void 0===e&&(e=!1),e&&!this.scriptToAddressCache[t])throw Error("unknow blinding key for script "+t);var r=this.masterBlindingKeyNode.derive(t);return{publicKey:r.publicKey,privateKey:r.privateKey}},u.scriptFromPublicKey=function(t){return h.payments.p2wpkh({pubkey:t,network:this.network}).output.toString("hex")},u.createConfidentialAddress=function(t,e){return h.payments.p2wpkh({pubkey:t,blindkey:e,network:this.network}).confidentialAddress},u.persistAddressToCache=function(t){var e=v.from(t.publicKey,"hex"),r=this.scriptFromPublicKey(e);this.scriptToAddressCache[r]=t},u.getAddress=function(t,e){var r=this.derivePublicKeyWithIndex(t,e),n=this.scriptFromPublicKey(r),i=this.getBlindingKeyPair(n),o=this.createConfidentialAddress(r,i.publicKey),a=this.baseDerivationPath+"/"+(t?1:0)+"/"+e;return{address:{confidentialAddress:o,blindingPrivateKey:i.privateKey.toString("hex"),derivationPath:a,publicKey:r.toString("hex")},publicKey:r.toString("hex")}},u.getNextAddress=(n=b(S.mark(function t(){var e;return S.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getAddress(!1,this.index),this.persistAddressToCache(e),this.index=this.index+1,t.abrupt("return",e.address);case 4:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)}),u.getNextChangeAddress=(i=b(S.mark(function t(){var e;return S.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getAddress(!0,this.changeIndex),this.persistAddressToCache(e),this.changeIndex=this.changeIndex+1,t.abrupt("return",e.address);case 4:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),u.getBlindingPrivateKey=(o=b(S.mark(function t(e){return S.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getBlindingKeyPair(e).privateKey.toString("hex"));case 1:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)}),u.signPset=function(t){throw Error("MasterPublicKey is a watch only identity. Use Mnemonic to sign transactions")},u.getAddresses=(a=b(S.mark(function t(){return S.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.values(this.scriptToAddressCache).map(function(t){return t.address}));case 1:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),u.getXPub=function(){return this.masterPublicKeyNode.toBase58()},e}(M);function B(t,e){return t.toString("hex")<e.toString("hex")?-1:1}D.INITIAL_BASE_PATH="m/84'/0'/0'",D.INITIAL_INDEX=0;var H=function(t){function e(e){(o=t.call(this,e)||this).nextIndex=0,o.nextChangeIndex=0,k(e.type,s.MultisigWatchOnly),function(t,e){if(t<=0||t>e)throw Error("number of required signatures must be > 0 and <= "+e)}(e.opts.requiredSignatures,e.opts.cosigners.length);var r,n,i,o,a=e.opts.cosigners.map(function(t){return function(t,e,r){if("string"==typeof t)return t;var n=(0,l.Z1)(t.mnemonic,t.passphrase),i=(0,y.ZP)(r),o=i.fromSeed(n,e).derivePath(t.baseDerivationPath||"m/48'/0'/0'/2'");return function(t,e){if(!L.has(e))return"Invalid target version";t=t.trim();try{var r=d().decode(t);return r=r.slice(4),r=v.concat([v.from(L.get(e),"hex"),r]),d().encode(r)}catch(n){throw Error("Invalid extended public key! Please double check that you didn't accidentally paste extra data.")}}(i.fromPublicKey(o.publicKey,o.chainCode,e).toBase58(),"xpub")}(t,o.network,o.ecclib)});return a.forEach(U),o.cosigners=a.sort().map(function(t){return(0,y.ZP)(o.ecclib).fromBase58(t)}),o.blindingKeyMasterNode=(r=o.cosigners,n=o.ecclib,i=function(t){for(var e,r=v.from("blinding_key"),n=v.alloc(32),i=T(t);!(e=i()).done;)n=function(t,e){if(t.length!==e.length)throw Error("a.length !== b.length (xor)");for(var r=v.alloc(t.length),n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}(n,e.value);return h.crypto.sha256(v.concat([r,n]))}(r.map(function(t){return t.chainCode})),(0,P.e)(n).fromSeed(i)),o.requiredSignatures=e.opts.requiredSignatures,o}_(e,t);var r=e.prototype;return r.getNextAddress=function(){var t=this.getMultisigAddress(e.EXTERNAL_INDEX,this.nextIndex);return this.nextIndex++,Promise.resolve(t)},r.getNextChangeAddress=function(){var t=this.getMultisigAddress(e.INTERNAL_INDEX,this.nextChangeIndex);return this.nextChangeIndex++,Promise.resolve(t)},r.getAddresses=function(){var t=this,r=Array.from(Array(this.nextIndex).keys()).map(function(r){return t.getMultisigAddress(e.EXTERNAL_INDEX,r)}),n=Array.from(Array(this.nextChangeIndex).keys()).map(function(r){return t.getMultisigAddress(e.INTERNAL_INDEX,r)});return Promise.resolve(r.concat(n))},r.getBlindingPrivateKey=function(t){return Promise.resolve(this.getBlindingKeyPair(t).privateKey.toString("hex"))},r.getBlindingKeyPair=function(t){var e=this.blindingKeyMasterNode.derive(t);if(!e.publicKey||!e.privateKey)throw Error("unable to generate blinding key pair");return{publicKey:e.publicKey,privateKey:e.privateKey}},r.isAbleToSign=function(){return!1},r.signPset=function(t){throw Error("WatchOnly Multisig Identity is not able to sign pset")},r.blindPset=function(e,r,n,i){var o=this;return t.prototype.blindPsetWithBlindKeysGetter.call(this,function(t){return o.getBlindingKeyPair(t.toString("hex"))},e,r,n,i)},r.getMultisigAddress=function(t,e){return m({},function(t,e,r,n){var i,o,a=h.payments.p2wsh({redeem:h.payments.p2ms({m:parseInt(r.toString()),pubkeys:t.map(function(t){return t.publicKey}).sort(B),network:n}),network:n});if(!a.address)throw Error("Invalid payment");var s=e.derive(h.address.toOutputScript(a.address,n)),u=s.publicKey,c=s.privateKey;if(!u||!c)throw Error("something went wrong while generating blinding key pair");if(!(a=h.payments.p2wsh({redeem:h.payments.p2ms({m:parseInt(r.toString()),pubkeys:t.map(function(t){return t.publicKey}).sort(B),network:n}),blindkey:u,network:n})).confidentialAddress||!a.redeem||!a.redeem.output)throw Error("invalid payment");return{blindingPrivateKey:c.toString("hex"),confidentialAddress:a.confidentialAddress,witnessScript:a.redeem.output.toString("hex")}}(this.cosigners.map(function(r){return r.derive(t).derive(e)}),this.blindingKeyMasterNode,this.requiredSignatures,this.network),{derivationPath:t+"/"+e})},e}(M);H.EXTERNAL_INDEX=0,H.INTERNAL_INDEX=1;var j=function(t){return t.reduce(function(t,e){return t+e},0)};function F(t){return t<253?1:t<=65535?3:t<=4294967295?5:9}var G=h.script.OPS,W=[G.OP_PUSHDATA1,G.OP_PUSHDATA2,G.OP_PUSHDATA4,G.OP_1NEGATE,G.OP_RESERVED,G.OP_IF,G.OP_VERIF,G.OP_VERNOTIF,G.OP_ELSE,G.OP_ENDIF,G.OP_VERIFY,G.OP_TOALTSTACK,G.OP_FROMALTSTACK,G.OP_2DROP,G.OP_2DUP,G.OP_3DUP,G.OP_2OVER,G.OP_2ROT,G.OP_2SWAP,G.OP_NIP,G.OP_OVER,G.OP_PICK,G.OP_ROLL,G.OP_ROT,G.OP_SWAP,G.OP_TUCK,G.OP_CAT,G.OP_SUBSTR,G.OP_SUBSTR_LAZY,G.OP_LEFT,G.OP_RIGHT,G.OP_SIZE,G.OP_INVERT,G.OP_AND,G.OP_OR,G.OP_XOR,G.OP_EQUAL,G.OP_EQUALVERIFY,G.OP_RESERVED1,G.OP_RESERVED2,G.OP_1ADD,G.OP_1SUB,G.OP_2MUL,G.OP_2DIV,G.OP_NEGATE,G.OP_ABS,G.OP_NOT,G.OP_0NOTEQUAL,G.OP_ADD,G.OP_SUB,G.OP_MUL,G.OP_DIV,G.OP_MOD,G.OP_LSHIFT,G.OP_RSHIFT,G.OP_BOOLAND,G.OP_BOOLOR,G.OP_NUMEQUAL,G.OP_NUMEQUALVERIFY,G.OP_NUMNOTEQUAL,G.OP_LESSTHAN,G.OP_GREATERTHAN,G.OP_LESSTHANOREQUAL,G.OP_GREATERTHANOREQUAL,G.OP_MIN,G.OP_MAX,G.OP_WITHIN,G.OP_RIPEMD160,G.OP_SHA1,G.OP_SHA256,G.OP_HASH160,G.OP_HASH256,G.OP_CODESEPARATOR,G.OP_CHECKMULTISIG,G.OP_CHECKMULTISIGVERIFY,G.OP_DETERMINISTICRANDOM,G.OP_SHA256INITIALIZE,G.OP_SHA256UPDATE,G.OP_SHA256FINALIZE,G.OP_ADD64,G.OP_SUB64,G.OP_MUL64,G.OP_DIV64,G.OP_NEG64,G.OP_LESSTHAN64,G.OP_LESSTHANOREQUAL64,G.OP_GREATERTHAN64,G.OP_GREATERTHANOREQUAL64,G.OP_SCRIPTNUMTOLE64,G.OP_LE64TOSCRIPTNUM,G.OP_LE32TOLE64,G.OP_ECMULSCALARVERIFY,G.OP_TWEAKVERIFY,G.OP_PUBKEYHASH,G.OP_PUBKEY,G.OP_INVALIDOPCODE],V=[G.OP_INSPECTINPUTOUTPOINT,G.OP_INSPECTINPUTASSET,G.OP_INSPECTINPUTVALUE,G.OP_INSPECTINPUTSCRIPTPUBKEY,G.OP_INSPECTINPUTSEQUENCE,G.OP_INSPECTINPUTISSUANCE,G.OP_PUSHCURRENTINPUTINDEX,G.OP_INSPECTOUTPUTASSET,G.OP_INSPECTOUTPUTVALUE,G.OP_INSPECTOUTPUTNONCE,G.OP_INSPECTOUTPUTSCRIPTPUBKEY,G.OP_INSPECTVERSION,G.OP_INSPECTLOCKTIME,G.OP_INSPECTNUMINPUTS,G.OP_INSPECTNUMOUTPUTS];function X(t,e){return!(e<0||e>=t.length)}var Y=function(t){return function(e){if(!X(t,e))throw Error("Invalid position (NEED PARAM OPCODE)");return{sigs:[],hasIntrospection:!1,needParameters:!0}}},Q=function(t){return function(e){if(!X(t,e))throw Error("invalid position (INTROSPECTION OPCODE)");return{sigs:[],hasIntrospection:!0,needParameters:!1}}},Z=function(t){return function(e){if(!X(t,e))throw Error("invalid position (CHECKSIG)");return X(t,e-1)?{sigs:[{pubkey:t[e-1].toString("hex")}],hasIntrospection:!1,needParameters:!1}:{sigs:[],hasIntrospection:!1,needParameters:!0}}},q=function(t){return v.of(t).toString("hex")},z=new Map().set(q(G.OP_CHECKSIG),Z);V.forEach(function(t){return z.set(q(t),Q)}),W.forEach(function(t){return z.set(q(t),Y)}),(o=u||(u={}))[o.SCRIPT=0]="SCRIPT",o[o.TREE=1]="TREE",o[o.HEX=2]="HEX",o[o.KEY=3]="KEY",(a=c||(c={})).ELTR="eltr",a.ASM="asm",a.RAW="raw",c.RAW,c.RAW,c.ASM,c.RAW,c.ELTR;var $=/^([A-Fa-f0-9]{2})+/;function J(t,e){var r=e.match(t);return r?[r[0],e.slice(r[0].length)]:["",e]}var tt=function(t,e){return Error('Expected "'+t+'" got "'+e+'"')};function te(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){for(var r,n,i=t.trimStart(),o=T(e);!(n=o()).done;){var a=(0,n.value)(i),s=a[0],u=a[1];s&&(r?r.children.push(s):r=s),i=u.trimStart()}return[r,i]}}function tr(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=[];return function(t){for(var r,i=T(e);!(r=i()).done;){var o=r.value;try{return o(t)}catch(a){a instanceof Error&&n.push(a)}}throw Error("one of: "+n.map(function(t){return t.message}).join(", "))}}var tn=function(t){var e=J($,t),r=e[0],n=e[1];return[{type:u.HEX,value:r,children:[]},n]},ti=function(t){var e=J($,t),r=e[0],n=e[1];if(64!==r.length)throw tt("key (hex string with len=64)",r);return[{type:u.KEY,value:r,children:[]},n]},to=function(t){var e=function(t,e){var r=t.indexOf(e);if(-1===r)throw Error("Expected "+e);return[t.slice(0,r),t.slice(r)]}(t,")"),r=e[0],n=e[1],i=h.script.fromASM(r);return[{type:u.HEX,value:i.toString("hex"),children:[]},n]},ta=function(t){return function(e){if(e.startsWith(t))return[void 0,e.slice(t.length)];throw tt(t,e.slice(0,t.length))}},ts=function(t){var e=ta("{")(t)[1];return[{type:u.TREE,value:void 0,children:[]},e]},tu=ta("}"),tc=function t(e){return e.startsWith("{")?te(ts,t,tr(te(tl,t,tu),tu))(e):tp(e)},th=function(t){return function(e){var r=te(ta(t.toString()),ta("("))(e);return[{type:u.SCRIPT,value:t,children:[]},r[1]]}},tf=ta(")"),tl=ta(","),tp=function(t){return tr(tP,td,ty)(t)},td=te(th(c.RAW),tn,tf),ty=te(th(c.ELTR),ti,tl,tc,tf),tP=te(th(c.ASM),to,tf)}}]);