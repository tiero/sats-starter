(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(14186)}])},81523:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(85893),a=s(25675),i=s.n(a);function r(e){let{title:t,author:s,beneficiary:a,description:r,imageSrc:c,onContributionClick:o}=e;return(0,n.jsxs)("div",{className:"card",style:{maxWidth:"320px"},children:[(0,n.jsx)("div",{className:"card-image",children:(0,n.jsx)("figure",{className:"image is-4by3",children:(0,n.jsx)(i(),{src:c,width:480,height:320,alt:"Random unsplash image"})})}),(0,n.jsxs)("div",{className:"card-content",children:[(0,n.jsx)("div",{className:"media",children:(0,n.jsxs)("div",{className:"media-content",children:[(0,n.jsx)("p",{className:"title is-4",children:t}),(0,n.jsxs)("p",{className:"subtitle is-6",children:["@",s]})]})}),(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("p",{className:"subtitle",children:r})})]}),(0,n.jsx)("div",{className:"columns is-centered",children:(0,n.jsx)("div",{className:"column is-half",children:(0,n.jsx)("button",{className:"button is-primary",onClick:()=>o(t,a),children:"Contribute"})})})]})}},84017:function(e,t,s){"use strict";s.a(e,async function(e,n){try{s.d(t,{Z:function(){return C}});var a,i,r,c,o=s(85893),l=s(67294),u=s(36477),d=s(84434),h=s(45217),m=s(4690),p=s(64090),f=s(58038),x=s(24299),N=s(32122),b=s(60756),y=s(73047),E=s(10386),g=s(42474),S=s(21876).Buffer,j=e([m,x,N]);[m,x,N]=j.then?(await j)():j,(a=r||(r={}))[a.TO_BE_SELECTED=0]="TO_BE_SELECTED",a[a.SMALL=1]="SMALL",a[a.MEDIUM=2]="MEDIUM",a[a.LARGE=3]="LARGE",(i=c||(c={}))[i.FORM=0]="FORM",i[i.INVOICE=1]="INVOICE",i[i.FUNDING_CONTRACT=2]="FUNDING_CONTRACT",i[i.FUNDED=3]="FUNDED",i[i.FAILURE=4]="FAILURE";let w={[r.TO_BE_SELECTED]:0,[r.SMALL]:15,[r.MEDIUM]:50,[r.LARGE]:100};function C(e){let{onCancel:t,beneficiary:s,title:n}=e,a=(0,g.randomBytes)(32),i=(0,h.ECPairFactory)(m).fromPrivateKey(a),j="testnet",C=d.networks[j],[I,O]=(0,l.useState)(0),[P,_]=(0,l.useState)(""),[v,D]=(0,l.useState)(r.TO_BE_SELECTED),[A,T]=(0,l.useState)(c.FORM),k=async e=>{let t=await (0,u.cs)(w[e],"USD");O(parseInt(t.toString())),D(e)},F=async(e,t,a)=>{if(e.length<=0)return;T(c.FUNDING_CONTRACT),await (0,y._v)(2e3);let[r]=e,o=d.ElementsValue.fromBytes(r.prevout.value).number-500,l=await (0,x._)(i.publicKey,S.from(s,"hex"),5e5,{startBlock:598350,endBlock:598360},C),u=(0,N.e)({keyPair:i,utxo:r,redeemScript:a,preimage:t,recipients:[{script:d.script.compile([d.script.OPS.OP_RETURN,S.from("sats-starter|".concat(n),"utf-8")]),asset:C.assetHash,amount:0},{script:l.scriptPubKey,asset:C.assetHash,amount:o},{asset:C.assetHash,amount:500}]});try{let h=new b.q((0,f.QS)(j)),m=await h.broadcastTx(u);T(c.FUNDED),_(m),(0,E.u)({title:n,contribution:{sats:I,txid:m,privateKey:i.privateKey.toString("hex")}})}catch(p){T(c.FAILURE),console.error(p),console.debug(u)}},L=()=>(0,o.jsxs)("div",{className:"container",children:[(0,o.jsxs)("div",{className:"buttons are-medium",children:[(0,o.jsxs)("button",{className:"button",onClick:()=>k(r.SMALL),children:["\uD83D\uDCB8 $",w[r.SMALL]]}),(0,o.jsxs)("button",{className:"button",onClick:()=>k(r.MEDIUM),children:["\uD83D\uDCB0 $",w[r.MEDIUM]]}),(0,o.jsxs)("button",{className:"button",onClick:()=>k(r.LARGE),children:["\uD83E\uDD11 $",w[r.LARGE]]})]}),(0,o.jsx)("div",{className:"content",children:(0,o.jsx)("div",{className:"columns is-vcentered",children:(0,o.jsxs)("div",{className:"column",children:[(0,o.jsxs)("h1",{className:"title",children:["Total $",w[v]]}),(0,o.jsxs)("p",{className:"subtitle",children:[I," sats"]})]})})}),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",{className:"buttons are-medium mt-4",children:[(0,o.jsx)("button",{className:"button is-primary",onClick:()=>T(c.INVOICE),children:"Fund"}),(0,o.jsx)("button",{className:"button",onClick:t,children:"Cancel"})]})]});return(0,o.jsxs)("div",{className:"modal is-active",children:[(0,o.jsx)("div",{className:"modal-background"}),(0,o.jsxs)("div",{className:"modal-card",children:[(0,o.jsx)("header",{className:"modal-card-head",children:(0,o.jsxs)("p",{className:"modal-card-title",children:["Contribute to ",n]})}),(0,o.jsx)("section",{className:"modal-card-body",children:(()=>{switch(A){case c.FORM:return L();case c.INVOICE:return(0,o.jsx)(p.Z,{publicKey:i.publicKey,sats:I,network:j,onFailure:console.error,onSuccess:F});case c.FUNDING_CONTRACT:return(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"content has-text-centered",children:(0,o.jsx)("p",{className:"subtitle",children:"\uD83D\uDE9C Funding contract..."})})});case c.FUNDED:return(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{className:"content has-text-centered",children:[(0,o.jsx)("p",{className:"subtitle",children:"\uD83C\uDF89 Contract has been funded!"}),(0,o.jsxs)("p",{className:"subtitle is-6",children:["\uD83D\uDD2D Open in"," ",(0,o.jsx)("a",{href:"".concat((0,f.bK)(j),"/tx/").concat(P),target:"_blank",rel:"noreferrer",children:"explorer"})]})]})});case c.FAILURE:return(0,o.jsx)("p",{className:"subtitle",children:"\uD83D\uDE11 Something went wrong. Try again later"});default:return(0,o.jsx)(o.Fragment,{})}})()})]}),(0,o.jsx)("button",{className:"modal-close is-large","aria-label":"close",onClick:t})]})}n()}catch(I){n(I)}})},64090:function(e,t,s){"use strict";s.d(t,{Z:function(){return P}});var n,a,i=s(85893),r=s(67294),c=s(59496),o=function(e){let{text:t}=e,{Canvas:s}=(0,c.y)();return(0,i.jsx)(s,{text:t,options:{type:"image/jpeg",quality:.3,level:"M",margin:7,scale:4,width:300,color:{dark:"#000",light:"#FFF"}}})},l=s(58038),u=s(28805),d=s.n(u),h=s(84434),m=s(73047);let p={regtest:"http://localhost:9090",testnet:"https://testnet.boltz.exchange/api",liquid:"https://boltz.exchange/api"};class f{constructor(e){this.createSubmarineSwap=async e=>{let t={type:"submarine",pairId:"L-BTC/BTC",orderSide:"sell",...e};return this.callCreateSwap(t)},this.createReverseSubmarineSwap=async e=>{let t={type:"reversesubmarine",pairId:"L-BTC/BTC",orderSide:"buy",...e};return this.callCreateSwap(t)},this.getPair=async e=>{var t;let s=await this.getApi("".concat(this.url,"/getpairs"));if(null==s?void 0:null===(t=s.pairs)||void 0===t?void 0:t[e])return s.pairs[e]},this.callCreateSwap=async e=>this.postApi("".concat(this.url,"/createswap"),e),this.getApi=async e=>{try{let t=await fetch(e);if(t.ok)return await t.json()}catch(s){throw s}},this.postApi=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=await fetch(e,{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"});if(!s.ok){let n=await s.text();throw Error("".concat(s.statusText,": ").concat(n))}return await s.json()}catch(a){throw a}},this.url=p[e]}}var x=s(42474);s(90482);var N=s(21876).Buffer;let b={maximal:4294967,minimal:5e4};b.maximal,l.Wh,l.sU,b.minimal,l.Wh,l.sU;let y=(e,t)=>{let s=d().decode(e);for(let{tagName:n,data:a}of s.tags)if(n===t)return a;return""},E=e=>{let{timeExpireDate:t}=d().decode(e);return t?1e3*t:0},g=(e,t)=>{let s=y(e,"payment_hash"),n=h.crypto.sha256(t).toString("hex");return s===n},S=(e,t)=>{let s=h.address.toOutputScript(e),n=h.script.toASM(h.script.decompile(s)||[]),a=h.crypto.sha256(N.from(t,"hex")).toString("hex");return n==="OP_0 ".concat(a)},j=e=>{let{invoice:t,lockupAddress:s,preimage:n,claimPublicKey:a,redeemScript:i}=e;return g(t,n)&&S(s,i)&&w(n,a,i)},w=(e,t,s)=>{let n=h.script.toASM(h.script.decompile(N.from(s,"hex"))||[]).split(" "),a=n[10],i=n[13],r=["OP_SIZE","20","OP_EQUAL","OP_IF","OP_HASH160",h.crypto.hash160(e).toString("hex"),"OP_EQUALVERIFY",t,"OP_ELSE","OP_DROP",a,"OP_NOP2","OP_DROP",i,"OP_ENDIF","OP_CHECKSIG"];return n.join()===r.join()},C=async(e,t,s)=>{let n=new f(t),a=(0,x.randomBytes)(32),i=h.crypto.sha256(a).toString("hex"),r=h.payments.p2pkh({pubkey:e}),c=r.pubkey.toString("hex"),{id:o,invoice:l,lockupAddress:u,redeemScript:d,timeoutBlockHeight:m}=await n.createReverseSubmarineSwap({claimPublicKey:c,onchainAmount:s,preimageHash:i}),p={claimPublicKey:c,id:o,invoice:l,lockupAddress:u,preimage:a,redeemScript:d,timeoutBlockHeight:m};if(j(p))return p};var I=s(60756),O=s(21876).Buffer;function P(e){let{publicKey:t,network:s,sats:n,onSuccess:c,onFailure:u}=e,[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(a.FETCHING_INVOICE),[x,N]=(0,r.useState)("Copy"),b=()=>{navigator.clipboard.writeText(d).then(()=>{N("\uD83D\uDCCB Copied"),(0,m._v)(3e3).then(()=>N("Copy"))},e=>console.error("Could not copy text: ",e))};return(0,r.useEffect)(()=>((async()=>{try{let e=n+l.Wh,i=await C(t,s,e);if(!i)throw Error("Error creating swap");let{invoice:r,lockupAddress:o,redeemScript:d,preimage:p}=i;console.log(o),f(a.AWAITING_PAYMENT),h(r);let x=Number(E(r)),N=setTimeout(()=>{throw Error("invoice expired")},x-Date.now()),b=new I.q((0,l.QS)(s));b.notifyPayments(o,async e=>{f(a.PAID),await (0,m._v)(1e3),c(e,p,O.from(d,"hex")),clearTimeout(N)})}catch(y){f(a.FAILURE),console.error(y),u(y)}})(),()=>{}),[s,n,t,u,c]),(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"content has-text-centered",children:(()=>{switch(p){case a.FETCHING_INVOICE:return(0,i.jsx)("p",{className:"subtitle",children:"Loading invoice..."});case a.AWAITING_PAYMENT:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{className:"title",children:"Deposit with ⚡️Lightning Network"}),(0,i.jsx)("p",{className:"subtitle",children:"Awaiting payment..."}),(0,i.jsx)(o,{text:d}),(0,i.jsx)("p",{className:"has-text-centered mt-4",children:(0,i.jsx)("button",{onClick:b,className:"button",children:x})})]});case a.PAID:return(0,i.jsx)("p",{className:"subtitle",children:"✅ Payment succesful!"});case a.FAILURE:return(0,i.jsx)("p",{className:"subtitle",children:"\uD83D\uDE11 Something went wrong. Try again later"})}})()})})}(n=a||(a={}))[n.FETCHING_INVOICE=0]="FETCHING_INVOICE",n[n.AWAITING_PAYMENT=1]="AWAITING_PAYMENT",n[n.PAID=2]="PAID",n[n.FAILURE=3]="FAILURE"},58038:function(e,t,s){"use strict";s.d(t,{QS:function(){return i},Wh:function(){return n},bK:function(){return r},sU:function(){return a}});let n=500,a=500,i=e=>{switch(e){case"regtest":return"http://localhost:3001";case"testnet":return"wss://esplora.blockstream.com/liquidtestnet/electrum-websocket/api";default:return"wss://esplora.blockstream.com/liquid/electrum-websocket/api"}},r=e=>{switch(e){case"regtest":return"http://localhost:5001";case"testnet":return"https://liquid.network/testnet";default:return"https://liquid.network"}}},24299:function(e,t,s){"use strict";s.a(e,async function(e,n){try{s.d(t,{_:function(){return u}});var a=s(35617),i=s.n(a),r=s(4690),c=s(66598),o=s(3431),l=e([r]);async function u(e,t,s,n,a){let l=await i()(),u=new c.CH(o,[n.startBlock,n.endBlock,s,a.assetHash,t.subarray(2),e.subarray(1)],a,{ecc:r,zkp:l});return u}r=(l.then?(await l)():l)[0],n()}catch(d){n(d)}})},60756:function(e,t,s){"use strict";s.d(t,{q:function(){return a}});var n=s(84434);class a{notifyPayments(e,t){let s=new WebSocket(this.wsEndpoint),a=n.crypto.sha256(n.address.toOutputScript(e)).reverse().toString("hex");s.onopen=()=>{s.send(JSON.stringify({id:1,method:"blockchain.scripthash.subscribe",params:[a]}))};let i=new Map,r=[];s.onmessage=async e=>{if(!e||!e.data)return;let c=JSON.parse(e.data);if(c.method&&"blockchain.scripthash.subscribe"===c.method&&s.send(JSON.stringify({id:2,method:"blockchain.scripthash.listunspent",params:[a]})),c.id&&2===c.id){let o=c.result;Array.isArray(o)&&o.length>0&&o.forEach((e,t)=>{let n=3+t;s.send(JSON.stringify({id:n,method:"blockchain.transaction.get",params:[e.tx_hash,!1]})),i.set(n,e)})}if(c.id&&c.id>=3){let l=c.id,u=i.get(l),d=c.result,h=n.Transaction.fromHex(d);if(u){let m=h.outs[u.tx_pos];r.push({txid:u.tx_hash,vout:u.tx_pos,prevout:m})}r.length===i.size&&(s.send(JSON.stringify({id:1,method:"blockchain.scripthash.unsubscribe",params:[a]})),s.close(),t(r))}}}async broadcastTx(e){return new Promise((t,s)=>{let n=new WebSocket(this.wsEndpoint);n.onopen=()=>{n.send(JSON.stringify({id:1,method:"blockchain.transaction.broadcast",params:[e]}))},n.onmessage=e=>{n.close();try{let a=JSON.parse(e.data);t(a.result)}catch(i){s(i)}},n.onerror=e=>{s(e)}})}constructor(e){this.wsEndpoint=e}}},10386:function(e,t,s){"use strict";s.d(t,{u:function(){return i}});let n={projects:[]},a="sats-starter-data";function i(e){let t=function(){let e=localStorage.getItem(a);return e?JSON.parse(e):n}();t.projects.push(e),localStorage.setItem(a,JSON.stringify(t))}},32122:function(e,t,s){"use strict";s.a(e,async function(e,n){try{s.d(t,{e:function(){return c}});var a=s(4690),i=s(84434),r=e([a]);function c(e){let{utxo:t,redeemScript:s,recipients:n,preimage:r,keyPair:c}=e,o=i.Creator.newPset(),l=i.Transaction.SIGHASH_ALL,u=new i.Updater(o);u.addInputs([{txid:t.txid,txIndex:t.vout,witnessUtxo:t.prevout,sighashType:l}]),u.addInWitnessScript(0,s),u.addOutputs(n);let d=new i.Signer(o),h=o.getInputPreimage(0,l),m=i.script.signature.encode(c.sign(h),l),p={partialSig:{pubkey:c.publicKey,signature:m}};if(d.addSignature(0,p,i.Pset.ECDSASigValidator(a)),!o.validateAllSignatures(i.Pset.ECDSASigValidator(a)))throw Error("Failed to sign transaction");let f=new i.Finalizer(o);return f.finalizeInput(0,(e,t)=>({finalScriptWitness:(0,i.witnessStackToScriptWitness)([m,r,s])})),i.Extractor.extract(o).toHex()}a=(r.then?(await r)():r)[0],n()}catch(o){n(o)}})},73047:function(e,t,s){"use strict";async function n(e){await Promise.resolve(new Promise(t=>{setTimeout(t,e)}))}s.d(t,{_v:function(){return n}}),s(90482),s(39831),s(21876).Buffer},52702:function(e,t,s){"use strict";let n=s(1864),a={basePath:"/sats-starter",reactStrictMode:!1,swcMinify:!0,images:{unoptimized:!0},sassOptions:{includePaths:[n.join("/","styles")]},webpack:e=>(e.resolve.fallback={...e.resolve.fallback,fs:!1},e.experiments.asyncWebAssembly=!0,e)};e.exports=a},14186:function(e,t,s){"use strict";s.a(e,async function(e,n){try{s.r(t),s.d(t,{default:function(){return h}});var a=s(85893),i=s(9008),r=s.n(i),c=s(67294),o=s(81523),l=s(84017),u=s(52702),d=e([l]);function h(){let[e,t]=(0,c.useState)(null),[s,n]=(0,c.useState)(!1),i=(e,s)=>{t({title:e,beneficiary:s}),n(!0)},d=()=>{t(null),n(!1)},h=(e,t)=>{i(e,t)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"⚡️ Sats Starter"}),(0,a.jsx)("meta",{name:"description",content:"Launch your crowdfunding campaign without intermediaries"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("section",{className:"hero is-medium is-primary",children:(0,a.jsxs)("div",{className:"hero-body",children:[(0,a.jsx)("h1",{className:"title",children:"⚡️ Sats Starter"}),(0,a.jsx)("p",{className:"subtitle",children:"Launch your crowdfunding campaign without intermediaries"})]})}),(0,a.jsxs)("section",{className:"section",children:[(0,a.jsx)("h1",{className:"title",children:"Latest projects"}),(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsx)("div",{className:"column is-3",children:(0,a.jsx)(o.Z,{title:"\uD83C\uDFB8 New guitar",description:"want to become a rockstar",imageSrc:"".concat(u.basePath,"/images/guitar.jpg"),author:"alice",beneficiary:"00143801cbe7007c4ce139ef7a48f492f239f700c315",onContributionClick:h})}),(0,a.jsx)("div",{className:"column is-3",children:(0,a.jsx)(o.Z,{title:"\uD83D\uDCB8 My Project",description:"plx need money",author:"tiero",beneficiary:"00143801cbe7007c4ce139ef7a48f492f239f700c315",imageSrc:"".concat(u.basePath,"/images/project.jpg"),onContributionClick:h})}),(0,a.jsx)("div",{className:"column is-3",children:(0,a.jsx)(o.Z,{title:"\uD83D\uDE97 New car",description:"plx need new car",imageSrc:"".concat(u.basePath,"/images/car.jpg"),author:"tiero",beneficiary:"00143801cbe7007c4ce139ef7a48f492f239f700c315",onContributionClick:h})}),(0,a.jsx)("div",{className:"column is-3",children:(0,a.jsx)(o.Z,{title:"\uD83D\uDE80 To the moon",description:"I want to go to the moon",imageSrc:"".concat(u.basePath,"/images/moon.jpg"),author:"bob",beneficiary:"00143801cbe7007c4ce139ef7a48f492f239f700c315",onContributionClick:h})})]})})]}),s&&e?(0,a.jsx)(l.Z,{title:e.title,beneficiary:e.beneficiary,onCancel:d}):null]})}l=(d.then?(await d)():d)[0],n()}catch(m){n(m)}})},46272:function(){},61393:function(){},46601:function(){},89214:function(){},52361:function(){},94616:function(){},3431:function(e){"use strict";e.exports=JSON.parse('{"contractName":"CrowdFundingWithCap","constructorInputs":[{"name":"endBlock","type":"number"},{"name":"claimBlock","type":"number"},{"name":"goal","type":"value"},{"name":"fundingAsset","type":"asset"},{"name":"beneficiaryProgram","type":"bytes"},{"name":"donorPublicKey","type":"xonlypubkey"}],"functions":[{"name":"goalReached","functionInputs":[],"require":[{"type":"outputvalue","expected":"$goal","atIndex":0},{"type":"outputasset","expected":"$fundingAsset","atIndex":0},{"type":"outputscript","expected":{"version":0,"program":"$beneficiaryProgram"},"atIndex":0},{"type":"after","expected":"$endBlock"}],"asm":["$endBlock","OP_CHECKLOCKTIMEVERIFY","OP_DROP","OP_0","OP_INSPECTOUTPUTVALUE","OP_1","OP_EQUALVERIFY","$goal","OP_GREATERTHANOREQUAL64","OP_VERIFY","OP_0","OP_INSPECTOUTPUTASSET","OP_1","OP_EQUALVERIFY","$fundingAsset","OP_EQUALVERIFY","OP_0","OP_INSPECTOUTPUTSCRIPTPUBKEY","OP_0","OP_EQUALVERIFY","$beneficiaryProgram","OP_EQUAL"]},{"name":"claimBack","functionInputs":[{"name":"signature0","type":"sig"}],"require":[{"type":"after","expected":"$claimBlock"}],"asm":["$claimBlock","OP_CHECKLOCKTIMEVERIFY","OP_DROP","$donorPublicKey","OP_CHECKSIG"]}]}')}},function(e){e.O(0,[714,938,841,905,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);